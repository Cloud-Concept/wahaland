<apex:page controller="cls_CommunityCreateCase" showChat="false" showHeader="false" docType="html-5.0" standardStylesheets="false" applyBodyTag="false" applyHtmlTag="false" > 
    <html class="no-js" lang="en">
        <head>
            <meta charset="utf-8" />
            <title>Waha</title>
            
            <link rel="stylesheet" media="all" href="{!URLFOR($Resource.WahaTemp02, 'WahaTemp02/css/base.css')}"/>
            <link rel="stylesheet" media="all" href="{!URLFOR($Resource.WahaTemp02, 'WahaTemp02/css/main.css')}"/>
        </head>
        <body class="inner">
            <apex:form id="myForm" rendered="{! If($Profile.Name =='Waha Customer Community Plus User' ,true,false) }">  
                <apex:pageBlock id="EsRate" rendered="true">
                    <header id="main-header">
                        
                        <div class="row header-inner">
                            
                            <div class="logo">
                                <a class="smoothscroll" href="#hero">Waha</a>
                            </div>
                            
                            <nav id="nav-wrap">         
                                
                                <a class="mobile-btn" href="#nav-wrap" title="Show navigation">
                                    <span class='menu-text'>Show Menu</span>
                                    <span class="menu-icon"></span>
                                </a>
                                <a class="mobile-btn" href="#" title="Hide navigation">
                                    <span class='menu-text'>Hide Menu</span>
                                    <span class="menu-icon"></span>
                                </a>         
                                
                                <ul id="nav" class="nav"> 
                                    <li><a class="smoothscroll" href="{!$Site.BaseUrl}">Home.</a></li>
                                    <!-- Logged in user -->
                                    <apex:outputPanel rendered="{! If($Profile.Name =='Waha Customer Community Plus User' ,true,false) }">
                                        <li><a class="smoothscroll" href="{!$Site.BaseUrl}/apex/vfp_CommunityTC">Tenancy Contract.</a></li>
                                        <li class="current"><a class="smoothscroll" href="{!$Site.BaseUrl}/apex/vfp_CommunityCases">Enquiries.</a></li>
                                        <li><a class="smoothscroll" href="{!$Site.Prefix}/secur/logout.jsp"> Logout.</a></li>
                                        <!--<li><apex:outputLink value="{!$Site.Prefix}/secur/logout.jsp" rendered="{!NOT(ISPICKVAL($User.UserType,'Guest'))}">{!$Label.site.logout}</apex:outputLink></li>-->
                                    </apex:outputPanel>
                                </ul> 
                                
                            </nav> <!-- /nav-wrap -->       
                            
                        </div> <!-- /header-inner -->
                        
                    </header> 
                    <div class="inside-page">
                        <section id="portfolio">
                            
                            <div class="row section-head">
                                
                                <div class="twelve columns">
                                    
                                    <h3>Submit New Enquiry</h3> 
                                    <apex:pageMessages id="msg" escape="false" rendered="true"></apex:pageMessages>
                                        <div class="row">
                                        <div class="tab-whole six columns">
                                            <div class="group"> 
                                                <label>TIF Refrence No</label>
                                                <apex:inputText value="{!TIF_Refrence_Number}" />
                                            </div>
                                            <div class="group">
                                                <label>Type <font size="5" color="red">*</font> </label>
                                                <apex:inputField id="type" label="Type" value="{!newCase.Type}"/>
                                            </div>
                                            <apex:actionRegion >
                                                <div class="group">
                                                    
                                                    <label>Location</label>
                                                    <apex:inputText label="Location" value="{!Location}" />
                                                    
                                                </div>
                                                
                                                <div class="group">
                                                    <label>Cost Responsibility</label>
                                                    <apex:inputText label="Cost Responsibility" value="{!costRes}" />
                                                </div>
                                            </apex:actionRegion>
                                        </div>
                                        <div class="tab-whole six columns">
                                            <div class="group">
                                                <label>Tenants Name</label>
                                                <div class="fix">
                                                    <apex:outputField label="Tenants Name" value="{!Tenant.Name}"/>
                                                </div>
                                            </div>
                                            <div class="group">
                                                <label>Requested by</label>
                                                <div class="fix">
                                                    <apex:outputText label="Requested by" value="{!ReuestedByName}"/>
                                                </div>
                                            </div>
                                            <apex:actionRegion >
                                                <div class="group">
                                                    <label>Tenancy Contract</label>
                                                    
                                                    <apex:selectList styleClass="form-control"  label="Tenancy Contract" size="1" value="{!SelectedTc}" id="TCList" >
                                                        <apex:selectOptions value="{!TC}" ></apex:selectOptions>
                                                        <apex:actionSupport action="{!updateUnits}" event="onchange" reRender="unitsPanel" status="unitStatus" /> 
                                                    </apex:selectList>
                                                </div>
                                                <div class="group">
                                                    <label>Unit</label>
                                                    
                                                    <apex:outputPanel id="unitsPanel">
                                                        <apex:selectList styleClass="form-control" label="Unit"   size="1" value="{!SelectedUnits}" id="UnitList"> 
                                                            <apex:selectOptions value="{!Units}"></apex:selectOptions>
                                                        </apex:selectList>
                                                    </apex:outputPanel>
                                                    
                                                </div>
                                            </apex:actionRegion>
                                            
                                            
                                        </div>
                                    </div>
                                    
                                    <label>Description of works/Tenants request <font size="5" color="red">*</font></label>
                                    <apex:inputField id="Description" label="Description of works/Tenants request" value="{!newCase.Description}"/>
                                    
                                    <apex:actionFunction name="saveCase" action="{!saveCase}" rerender="jserror" >
                                    </apex:actionFunction> 
                                    <apex:actionFunction name="showMessage" action="{!showMessage}" rerender="jserror">
                                        <apex:param name="errorLevel" assignTo="{!errorLevel}" value="" />
                                        <apex:param name="messageName" assignTo="{!messageName}" value="" />
                                    </apex:actionFunction>
                                    <script>
                                    function checkRequired(){
                                        var description = document.getElementById("j_id0:myForm:EsRate:Description");
                                        var type = document.getElementById("j_id0:myForm:EsRate:type");
                                        var message=document.getElementById("{!$Component.myForm.EsRate.msg}");
                                        if(description.value == "" || type.value == "" ){
                                            var message = document.getElementById("j_id0:myForm:EsRate:msg");
                                            message.textContent = "Please Fill Mandatory Fields *.";
                                            var message2 = document.getElementById("j_id0:myForm:EsRate:msg2");
                                            message2.textContent = "Please Fill Mandatory Fields *.";
                                        }
                                        else{
                                            if(confirm('Are You Sure you want to Submit this Enquiry')){
                                                document.getElementById("j_id0:myForm:EsRate:HiddenButton").click();
                                            }
                                        }
                                    }
                                    </script>
                                    <di>
                                    <apex:pageMessages id="msg2" escape="false" rendered="true"></apex:pageMessages>
                                    </di>
                                        <div>
                                    <apex:commandButton styleClass="stroke medium"  value="Submit Enquiry"  onclick="checkRequired();" rerender="false"/>
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                    <apex:commandButton styleClass="stroke medium" action="{!redirectCaseList}" value="Cancel" />
                                    <apex:commandButton style="height:0px;width:0px;background:none;padding:0px;" id="HiddenButton"  action="{!saveCase}" />
                                        
                                    </div>
                                </div>
                            </div>
                            
                            <!-- /row -->
                            
                        </section> <!-- /Portfolio -->
                    </div>
                    <footer>
                        
                        <div class="row">       
                            
                            <div class="six columns tab-whole footer-about">
                                <p class="copyright">&copy; Copyright 2016 Waha. Developed by <a href="http://cloudconceptgroup.com/" target="_blank" >Cloud Concept.</a></p>  
                                
                            </div> <!-- /footer-about -->
                            
                            <div class="three columns tab-whole right-cols">
                                
                                <div class="row">
                                    
                                    <h3 class="contact">Follow Us</h3>
                                    
                                    
                                    <ul class="footer-list">
                                        <li><a href="https://www.linkedin.com/company/waha-capital?trk=top_nav_home" target="_blank">Linkedin</a></li>
                                        <li><a href="https://twitter.com/WahaCapital"  target="_blank">Twitter</a></li>
                                    </ul> 
                                    
                                    
                                </div> <!-- /Row(nested) -->
                                
                            </div>
                            
                            
                            
                            
                            
                            
                        </div> <!-- /row -->
                        
                    </footer>
                </apex:pageBlock>
                
                
                
            </apex:form>
        </body>
        
    </html>  
</apex:page>